{"ast":null,"code":"import _defineProperty from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Navigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);var _super=_createSuper(LoginForm);function LoginForm(){var _this;_classCallCheck(this,LoginForm);_this=_super.call(this);_this.state={username:'',password:'',redirectTo:null};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginForm,[{key:\"handleChange\",value:function handleChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"handleSubmit\",value:function handleSubmit(event){var _this2=this;event.preventDefault();console.log('handleSubmit');axios.post('/user/login',{username:this.state.username,password:this.state.password}).then(function(response){console.log('login response: ');console.log(response);if(response.status===200){// update App.js state\n_this2.props.updateUser({loggedIn:true,username:response.data.username});// update the state to redirect to home\n_this2.setState({redirectTo:'/'});}}).catch(function(error){console.log('login error: ');console.log(error);});}},{key:\"render\",value:function render(){if(this.state.redirectTo){return/*#__PURE__*/_jsx(Navigate,{to:{pathname:this.state.redirectTo}});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"form-horizontal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1 col-ml-auto\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"username\",children:\"Username\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3 col-mr-auto\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"text\",id:\"username\",name:\"username\",placeholder:\"Username\",value:this.state.username,onChange:this.handleChange})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1 col-ml-auto\",children:/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"password\",children:\"Password: \"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-3 col-mr-auto\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",placeholder:\"password\",type:\"password\",name:\"password\",value:this.state.password,onChange:this.handleChange})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-7\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary col-1 col-mr-auto\",onClick:this.handleSubmit,type:\"submit\",children:\"Login\"})]})]})]});}}}]);return LoginForm;}(Component);export default LoginForm;","map":{"version":3,"names":["React","Component","Navigate","axios","LoginForm","state","username","password","redirectTo","handleSubmit","bind","handleChange","event","setState","target","name","value","preventDefault","console","log","post","then","response","status","props","updateUser","loggedIn","data","catch","error","pathname"],"sources":["/home/ubuntu/environment/public_html/DealTracker/front-end/src/components/login-form.js"],"sourcesContent":["import React, { Component } from 'react'\nimport { Navigate } from 'react-router-dom'\nimport axios from 'axios'\n\nclass LoginForm extends Component {\n    constructor() {\n        super()\n        this.state = {\n            username: '',\n            password: '',\n            redirectTo: null\n        }\n        this.handleSubmit = this.handleSubmit.bind(this)\n        this.handleChange = this.handleChange.bind(this)\n  \n    }\n\n    handleChange(event) {\n        this.setState({\n            [event.target.name]: event.target.value\n        })\n    }\n\n    handleSubmit(event) {\n        event.preventDefault()\n        console.log('handleSubmit')\n\n        axios.post('/user/login', {\n            username: this.state.username,\n            password: this.state.password\n        }).then(response => {\n            console.log('login response: ')\n            console.log(response)\n            if (response.status === 200) {\n                // update App.js state\n                this.props.updateUser({\n                    loggedIn: true,\n                    username: response.data.username\n                })\n                // update the state to redirect to home\n                this.setState({\n                    redirectTo: '/'\n                })\n            }\n        }).catch(error => {\n            console.log('login error: ')\n            console.log(error);\n            \n        })\n    }\n\n    render() {\n        if (this.state.redirectTo) {\n            return <Navigate to={{ pathname: this.state.redirectTo }} />\n        } else {\n            return (\n                <div>\n                    <h4>Login</h4>\n                    <form className=\"form-horizontal\">\n                        <div className=\"form-group\">\n                            <div className=\"col-1 col-ml-auto\">\n                                <label className=\"form-label\" htmlFor=\"username\">Username</label>\n                            </div>\n                            <div className=\"col-3 col-mr-auto\">\n                                <input className=\"form-input\"\n                                    type=\"text\"\n                                    id=\"username\"\n                                    name=\"username\"\n                                    placeholder=\"Username\"\n                                    value={this.state.username}\n                                    onChange={this.handleChange}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"form-group\">\n                            <div className=\"col-1 col-ml-auto\">\n                                <label className=\"form-label\" htmlFor=\"password\">Password: </label>\n                            </div>\n                            <div className=\"col-3 col-mr-auto\">\n                                <input className=\"form-input\"\n                                    placeholder=\"password\"\n                                    type=\"password\"\n                                    name=\"password\"\n                                    value={this.state.password}\n                                    onChange={this.handleChange}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"form-group \">\n                            <div className=\"col-7\"></div>\n                            <button\n                                className=\"btn btn-primary col-1 col-mr-auto\"\n                               \n                                onClick={this.handleSubmit}\n                                type=\"submit\">Login</button>\n                        </div>\n                    </form>\n                </div>\n            )\n        }\n    }\n}\n\nexport default LoginForm\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}