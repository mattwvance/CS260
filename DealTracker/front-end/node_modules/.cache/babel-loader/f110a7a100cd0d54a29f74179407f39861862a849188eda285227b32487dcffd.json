{"ast":null,"code":"import _regeneratorRuntime from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Link}from'react-router-dom';import fetch from'node-fetch';import SearchFilter from'./filter';import'./home.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var options={method:'GET',headers:{accept:'application/json'}};var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);_this=_super.call(this);_this.fetchGame=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var title;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:title=data.target.value;if(_this.state.searchStores===null){fetch('https://www.cheapshark.com/api/1.0/deals?onSale=1&title='+title).then(function(response){return response.json();}).then(function(gameList){_this.setState({games:gameList},function(){console.log(_this.state.games);});});}else{fetch(\"https://www.cheapshark.com/api/1.0/deals?onSale=1&title=\".concat(title,\"&storeID=\").concat(_this.state.searchStores)).then(function(response){return response.json();}).then(function(gameList){_this.setState({games:gameList},function(){console.log(_this.state.games);});});}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.addToWishlist=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data,game){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('/game/',{game:JSON.stringify(data)});case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.log('Error: '+_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this.handleChange=function(event){var list=_this.state.searchStores;if(event.target.checked){if(list===null)list=event.target.value;else{list=list+','+event.target.value;}}else{list=list.replace(event.target.value+',','');}_this.state.searchStores=list;};_this.getIcon=function(game){var _this$props$allStores;var url=(_this$props$allStores=_this.props.allStores)===null||_this$props$allStores===void 0?void 0:_this$props$allStores.find(function(store){return store.storeID===game.storeID;}).images.icon;return'https://www.cheapshark.com'+url;};_this.state={games:null,searchStores:null};_this.getIcon=_this.getIcon.bind(_assertThisInitialized(_this));_this.fetchGame=_this.fetchGame.bind(_assertThisInitialized(_this));_this.addToWishlist=_this.addToWishlist.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('https://www.cheapshark.com/api/1.0/deals?',options).then(function(response){return response.json();}).then(function(gameList){_this2.setState({games:gameList},function(){console.log(_this2.state.games);});});}},{key:\"render\",value:function render(){var _this$state$games,_this3=this;return/*#__PURE__*/_jsx(\"div\",{class:\"page-container\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"container-row\",children:[/*#__PURE__*/_jsx(SearchFilter,{class:\"\",handleChange:this.handleChange,stores:this.props.allStores}),/*#__PURE__*/_jsxs(\"div\",{children:[!this.props.loggedIn&&/*#__PURE__*/_jsx(\"span\",{children:\"Sign Up to create your own Wishlist!\"}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"input\",{class:\"search-bar\",type:\"text\",placeholder:\"Enter Game Title\",onChange:this.fetchGame})}),/*#__PURE__*/_jsx(\"div\",{class:\"list-wrapper\",children:(_this$state$games=this.state.games)===null||_this$state$games===void 0?void 0:_this$state$games.map(function(game){return/*#__PURE__*/_jsxs(\"div\",{class:\"game-container\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"image-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"game\",class:\"image-style\",src:game.thumb})}),/*#__PURE__*/_jsxs(\"div\",{class:\"price-container\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{class:\"icon\",src:_this3.getIcon(game)}),/*#__PURE__*/_jsxs(\"span\",{class:\"price\",children:[\"$\",game.salePrice]}),/*#__PURE__*/_jsxs(\"span\",{class:\"strike price\",children:[\"$\",game.normalPrice]})]}),_this3.props.loggedIn&&/*#__PURE__*/_jsx(\"button\",{onClick:_this3.addToWishlist.bind(_this3,game),children:\"Add to Wishlist\"})]})]});})})]})]})});}}]);return Home;}(Component);// <Link to='info' onClick={this.props.setGame(game)}><img alt='game' class='image-style' src={game.thumb}/></Link>\nexport{Home as default};","map":{"version":3,"names":["React","Component","Link","fetch","SearchFilter","axios","options","method","headers","accept","Home","fetchGame","data","title","target","value","state","searchStores","then","response","json","gameList","setState","games","console","log","addToWishlist","game","post","JSON","stringify","handleChange","event","list","checked","replace","getIcon","url","props","allStores","find","store","storeID","images","icon","bind","loggedIn","map","thumb","salePrice","normalPrice"],"sources":["/home/ubuntu/environment/public_html/DealTracker/front-end/src/components/home.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport fetch from 'node-fetch';\nimport SearchFilter from './filter';\nimport './home.css';\nimport axios from 'axios';\n\nconst options = {method: 'GET', headers: {accept: 'application/json'}};\n\nexport default class Home extends Component {\n  \n  constructor() {\n    super();\n    this.state = {\n      games: null,\n      searchStores: null\n    };\n    this.getIcon = this.getIcon.bind(this);\n    this.fetchGame = this.fetchGame.bind(this);\n    this.addToWishlist = this.addToWishlist.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n  \n  componentDidMount() {\n    fetch('https://www.cheapshark.com/api/1.0/deals?', options)\n    .then((response) => response.json())\n    .then(gameList => {\n      this.setState({ games: gameList }, () => { console.log(this.state.games) });\n    });\n  }\n  \n  fetchGame = async(data) => {\n    const title = data.target.value;\n    if (this.state.searchStores === null) {\n      fetch('https://www.cheapshark.com/api/1.0/deals?onSale=1&title=' + title)\n      .then((response) => response.json())\n      .then(gameList => {\n        this.setState({ games: gameList }, () => { console.log(this.state.games) });\n      });\n    } else {\n      fetch(`https://www.cheapshark.com/api/1.0/deals?onSale=1&title=${title}&storeID=${this.state.searchStores}`)\n      .then((response) => response.json())\n      .then(gameList => {\n        this.setState({ games: gameList }, () => { console.log(this.state.games) });\n      });\n    }\n  }\n  \n  addToWishlist = async(data, game) => {\n    try {\n      await axios.post('/game/', { game: JSON.stringify(data) });\n    } catch(error) {\n      console.log('Error: ' + error);\n    }\n  }\n  \n  handleChange = (event) => {\n    var list = this.state.searchStores;\n    if (event.target.checked) {\n      if (list === null) list = event.target.value;\n      else {\n        list = list + ',' + event.target.value;\n      }\n    } else {\n      list = list.replace(event.target.value + ',', '');\n    }\n    this.state.searchStores = list;\n  }\n  \n  getIcon = (game) => {\n    const url = this.props.allStores?.find(store => store.storeID === game.storeID).images.icon;\n    return 'https://www.cheapshark.com' + url;\n  }\n  \n  render() {\n    return (\n    <div class='page-container'>\n      <div class='container-row'>\n        <SearchFilter class='' handleChange={this.handleChange} stores={this.props.allStores}/>\n        <div>\n          {!this.props.loggedIn &&\n            <span>Sign Up to create your own Wishlist!</span>\n          }\n          <form>\n            <input class='search-bar' type='text' placeholder='Enter Game Title' onChange={this.fetchGame}/>\n          </form>\n          <div class='list-wrapper'>\n            {this.state.games?.map(game => (\n              <div class='game-container'>\n                <div class='image-wrapper'>\n                  <img alt='game' class='image-style' src={game.thumb}/>\n                </div>\n                <div class='price-container'>\n                  <div>\n                    <img class='icon' src={this.getIcon(game)}/>\n                    <span class='price'>${game.salePrice}</span>\n                    <span class='strike price'>${game.normalPrice}</span>\n                  </div>\n                  {this.props.loggedIn &&\n                    <button onClick={this.addToWishlist.bind(this, game)}>Add to Wishlist</button>\n                  }\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n    );\n  }\n}\n\n\n// <Link to='info' onClick={this.props.setGame(game)}><img alt='game' class='image-style' src={game.thumb}/></Link>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}