{"ast":null,"code":"import _regeneratorRuntime from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import fetch from'node-fetch';import axios from'axios';import'./home.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var options={method:'GET',headers:{accept:'application/json'}};var Games=/*#__PURE__*/function(_Component){_inherits(Games,_Component);var _super=_createSuper(Games);function Games(){var _this;_classCallCheck(this,Games);_this=_super.call(this);_this.getIcon=function(game){console.log(_this.state.allStores.find(function(store){return store.storeID===game.storeID;}).images.icon);var url=_this.state.allStores.find(function(store){return store.storeID===game.storeID;}).images.icon;return'https://www.cheapshark.com'+url;};_this.state={games:null,allStores:null};_this.getIcon=_this.getIcon.bind(_assertThisInitialized(_this));_this.fetchWishlist=_this.fetchWishlist.bind(_assertThisInitialized(_this));return _this;}_createClass(Games,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log('moutnig');this.fetchWishlist();console.log('done did mount');fetch('https://www.cheapshark.com/api/1.0/stores',options).then(function(response){return response.json();}).then(function(storeList){_this2.setState({allStores:storeList},function(){console.log(_this2.state.allStores);});});}},{key:\"fetchWishlist\",value:function(){var _fetchWishlist=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _this3=this;var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/game/');case 3:response=_context.sent;response=response.data;this.setState({games:response},function(){console.log(_this3.state.games);});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,this,[[0,8]]);}));function fetchWishlist(){return _fetchWishlist.apply(this,arguments);}return fetchWishlist;}()},{key:\"removeFromWishlist\",value:function(){var _removeFromWishlist=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(game){var _this4=this;var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete('/game/',{data:{game:game}});case 3:response=_context2.sent;response=response.data;this.setState({games:response},function(){console.log(_this4.state.games);});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,this,[[0,8]]);}));function removeFromWishlist(_x){return _removeFromWishlist.apply(this,arguments);}return removeFromWishlist;}()},{key:\"render\",value:function render(){var _this$state$games,_this5=this;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{class:\"list-wrapper\",children:(_this$state$games=this.state.games)===null||_this$state$games===void 0?void 0:_this$state$games.map(function(game){return/*#__PURE__*/_jsxs(\"div\",{class:\"game-container\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"image-wrapper\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"game\",class:\"image-style\",src:game.thumb})}),/*#__PURE__*/_jsxs(\"div\",{class:\"price-container\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{class:\"icon\",src:_this5.getIcon(game)}),/*#__PURE__*/_jsxs(\"span\",{class:\"price\",children:[\"$\",game.salePrice]}),/*#__PURE__*/_jsxs(\"span\",{class:\"strike price\",children:[\"$\",game.normalPrice]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:_this5.removeFromWishlist.bind(_this5,game),children:\"Remove from Wishlist\"})]})]});})})});}}]);return Games;}(Component);export{Games as default};","map":{"version":3,"names":["React","Component","fetch","axios","options","method","headers","accept","Games","getIcon","game","console","log","state","allStores","find","store","storeID","images","icon","url","games","bind","fetchWishlist","then","response","json","storeList","setState","get","data","delete","map","thumb","salePrice","normalPrice","removeFromWishlist"],"sources":["/home/ubuntu/environment/public_html/DealTracker/front-end/src/components/games.js"],"sourcesContent":["import React, { Component } from 'react';\nimport fetch from 'node-fetch';\nimport axios from 'axios';\nimport './home.css';\n\nconst options = {method: 'GET', headers: {accept: 'application/json'}};\n\nexport default class Games extends Component {\n  \n  constructor() {\n    super();\n    this.state = {\n      games: null,\n      allStores: null\n    };\n    this.getIcon = this.getIcon.bind(this);\n    this.fetchWishlist = this.fetchWishlist.bind(this);\n  }\n  \n  componentDidMount() {\n    console.log('moutnig')\n    this.fetchWishlist();\n    console.log('done did mount')\n    fetch('https://www.cheapshark.com/api/1.0/stores', options)\n    .then((response) => response.json())\n    .then(storeList => {\n      this.setState({ allStores: storeList }, () => { console.log(this.state.allStores) });\n    });\n  }\n  \n  async fetchWishlist() {\n    try {\n      let response = await axios.get('/game/');\n      response = response.data;\n      this.setState({ games: response }, () => { console.log(this.state.games) });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  \n  async removeFromWishlist(game) {\n    try {\n      let response = await axios.delete('/game/', {data: {game}});\n      response = response.data;\n      this.setState({games: response}, () => {console.log(this.state.games)});\n    } catch(error) {\n      console.log(error);\n    }\n  }\n  \n  getIcon = (game) => {\n    console.log(this.state.allStores.find(store => store.storeID === game.storeID).images.icon);\n    const url = this.state.allStores.find(store => store.storeID === game.storeID).images.icon;\n    return 'https://www.cheapshark.com' + url;\n  }\n  \n  render() {\n    return (\n      <div>\n        <div class='list-wrapper'>\n          {this.state.games?.map(game => ( \n            <div class='game-container'>\n              <div class='image-wrapper'>\n                <img alt='game' class='image-style' src={game.thumb}/>\n              </div>\n              <div class='price-container'>\n                <div>\n                  <img class='icon' src={this.getIcon(game)}/>\n                  <span class='price'>${game.salePrice}</span>\n                  <span class='strike price'>${game.normalPrice}</span>\n                </div>\n                <button onClick={this.removeFromWishlist.bind(this, game)}>Remove from Wishlist</button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}