{"ast":null,"code":"import _regeneratorRuntime from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';// import GameList from './shared/game-list';\nimport axios from'axios';import'./home.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Games=/*#__PURE__*/function(_Component){_inherits(Games,_Component);var _super=_createSuper(Games);function Games(){var _this;_classCallCheck(this,Games);_this=_super.call(this);_this.state={games:null};// this.getUser = this.getUser.bind(this);\n// this.componentDidMount = this.componentDidMount.bind(this);\n// this.updateUser = this.updateUser.bind(this);\n_this.fetchWishlist=_this.fetchWishlist.bind(_assertThisInitialized(_this));return _this;}_createClass(Games,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.fetchWishlist();// this.getUser();\ncase 1:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()// async getUser() {\n//   axios.get('/user/').then(response => {\n//     console.log('Get user response: ');\n//     console.log(response.data);\n//     if (response.data.user) {\n//       console.log('Get User: There is a user saved in the server session: ');\n//       this.setState({\n//         loggedIn: true,\n//         username: response.data.user.username\n//       });\n//     } else {\n//       console.log('Get user: no user');\n//       this.setState({\n//         loggedIn: false,\n//         username: null\n//       });\n//     }\n//   });\n// }\n},{key:\"fetchWishlist\",value:function(){var _fetchWishlist=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _this2=this;var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get('/game/');case 3:response=_context2.sent;response=response.data;this.setState({games:response},function(){console.log(_this2.state.games);});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,this,[[0,8]]);}));function fetchWishlist(){return _fetchWishlist.apply(this,arguments);}return fetchWishlist;}()},{key:\"removeFromWishlist\",value:function(){var _removeFromWishlist=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(game){var _this3=this;var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;console.log(game);_context3.next=4;return axios.delete('/game/',{data:{game:game}});case 4:response=_context3.sent;response=response.data;console.log('deleted game',response);this.setState({games:response},function(){console.log(_this3.state.games);});_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 13:case\"end\":return _context3.stop();}}},_callee3,this,[[0,10]]);}));function removeFromWishlist(_x){return _removeFromWishlist.apply(this,arguments);}return removeFromWishlist;}()},{key:\"render\",value:function render(){var _this$state$games,_this4=this;return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{class:\"list-wrapper\",children:(_this$state$games=this.state.games)===null||_this$state$games===void 0?void 0:_this$state$games.map(function(game){return/*#__PURE__*/_jsxs(\"div\",{class:\"game-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"game\",class:\"image-style\",src:game.thumb}),/*#__PURE__*/_jsx(\"p\",{children:game.salePrice}),/*#__PURE__*/_jsx(\"p\",{class:\"strike\",children:game.normalPrice}),/*#__PURE__*/_jsx(\"button\",{onClick:_this4.removeFromWishlist.bind(_this4,game),children:\"Remove\"})]});})})});}}]);return Games;}(Component);export{Games as default};","map":{"version":3,"names":["React","Component","axios","Games","state","games","fetchWishlist","bind","get","response","data","setState","console","log","game","delete","map","thumb","salePrice","normalPrice","removeFromWishlist"],"sources":["/home/ubuntu/environment/public_html/DealTracker/front-end/src/components/games.js"],"sourcesContent":["import React, { Component } from 'react';\n// import GameList from './shared/game-list';\nimport axios from 'axios';\nimport './home.css';\n\nexport default class Games extends Component {\n  \n  constructor() {\n    super();\n    this.state = {\n      games: null\n    };\n\n    // this.getUser = this.getUser.bind(this);\n    // this.componentDidMount = this.componentDidMount.bind(this);\n    // this.updateUser = this.updateUser.bind(this);\n    this.fetchWishlist = this.fetchWishlist.bind(this);\n  }\n  \n  async componentDidMount() {\n    this.fetchWishlist();\n    // this.getUser();\n  }\n  \n  // async getUser() {\n  //   axios.get('/user/').then(response => {\n  //     console.log('Get user response: ');\n  //     console.log(response.data);\n  //     if (response.data.user) {\n  //       console.log('Get User: There is a user saved in the server session: ');\n\n  //       this.setState({\n  //         loggedIn: true,\n  //         username: response.data.user.username\n  //       });\n  //     } else {\n  //       console.log('Get user: no user');\n  //       this.setState({\n  //         loggedIn: false,\n  //         username: null\n  //       });\n  //     }\n  //   });\n  // }\n  \n  async fetchWishlist() {\n    try {\n      let response = await axios.get('/game/');\n      response = response.data;\n      this.setState({ games: response }, () => { console.log(this.state.games) });\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  \n  async removeFromWishlist(game) {\n    try {\n      console.log(game);\n      let response = await axios.delete('/game/', {data: {game}});\n      response = response.data;\n      console.log('deleted game', response);\n      this.setState({games: response}, () => {console.log(this.state.games)});\n    } catch(error) {\n      console.log(error);\n    }\n  }\n  \n  render() {\n    return (\n      <div>\n        <div class='list-wrapper'>\n          {this.state.games?.map(game => ( \n            <div class='game-wrapper'>\n              <img alt='game' class='image-style' src={game.thumb}/>\n              <p>{game.salePrice}</p>\n              <p class='strike'>{game.normalPrice}</p>\n              <button onClick={this.removeFromWishlist.bind(this, game)}>Remove</button>\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n }\n}"],"mappings":"ggCAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC;AACA,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAO,YAAY,CAAC,2FAECC,MAAK,8FAExB,gBAAc,uCACZ,wBACA,MAAKC,KAAK,CAAG,CACXC,KAAK,CAAE,IACT,CAAC,CAED;AACA;AACA;AACA,MAAKC,aAAa,CAAG,MAAKA,aAAa,CAACC,IAAI,+BAAM,CAAC,aACrD,CAAC,+IAED,qIACE,IAAI,CAACD,aAAa,EAAE,CACpB;AAAA,2DACD,6GAED;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,qHAEA,+MAEyBJ,MAAK,CAACM,GAAG,CAAC,QAAQ,CAAC,QAApCC,QAAQ,gBACZA,QAAQ,CAAGA,QAAQ,CAACC,IAAI,CACxB,IAAI,CAACC,QAAQ,CAAC,CAAEN,KAAK,CAAEI,QAAS,CAAC,CAAE,UAAM,CAAEG,OAAO,CAACC,GAAG,CAAC,MAAI,CAACT,KAAK,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,mFAE5EO,OAAO,CAACC,GAAG,cAAO,CAAC,sEAEtB,gOAED,kBAAyBC,IAAI,sKAEzBF,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC,CAAC,uBACGZ,MAAK,CAACa,MAAM,CAAC,QAAQ,CAAE,CAACL,IAAI,CAAE,CAACI,IAAI,CAAJA,IAAI,CAAC,CAAC,CAAC,QAAvDL,QAAQ,gBACZA,QAAQ,CAAGA,QAAQ,CAACC,IAAI,CACxBE,OAAO,CAACC,GAAG,CAAC,cAAc,CAAEJ,QAAQ,CAAC,CACrC,IAAI,CAACE,QAAQ,CAAC,CAACN,KAAK,CAAEI,QAAQ,CAAC,CAAE,UAAM,CAACG,OAAO,CAACC,GAAG,CAAC,MAAI,CAACT,KAAK,CAACC,KAAK,CAAC,EAAC,CAAC,CAAC,qFAExEO,OAAO,CAACC,GAAG,cAAO,CAAC,uEAEtB,wIAED,iBAAS,mCACP,mBACE,kCACE,YAAK,KAAK,CAAC,cAAc,6BACtB,IAAI,CAACT,KAAK,CAACC,KAAK,4CAAhB,kBAAkBW,GAAG,CAAC,SAAAF,IAAI,qBACzB,aAAK,KAAK,CAAC,cAAc,wBACvB,YAAK,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,GAAG,CAAEA,IAAI,CAACG,KAAM,EAAE,cACtD,mBAAIH,IAAI,CAACI,SAAS,EAAK,cACvB,UAAG,KAAK,CAAC,QAAQ,UAAEJ,IAAI,CAACK,WAAW,EAAK,cACxC,eAAQ,OAAO,CAAE,MAAI,CAACC,kBAAkB,CAACb,IAAI,CAAC,MAAI,CAAEO,IAAI,CAAE,oBAAgB,GACtE,EACP,CAAC,EACE,EACF,CAEX,CAAC,mBA7EiCb,SAAS,SAAvBE,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}