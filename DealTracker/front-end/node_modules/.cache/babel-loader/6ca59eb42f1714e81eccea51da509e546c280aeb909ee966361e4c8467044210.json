{"ast":null,"code":"import _regeneratorRuntime from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/ubuntu/environment/public_html/DealTracker/front-end/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import fetch from'node-fetch';import'./home.css';import axios from'axios';// components\nimport GameList from'./shared/game-list';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var options={method:'GET',headers:{accept:'application/json'}};var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);_this=_super.call(this);_this.fetchGame=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var title;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:title=data.target.value;console.log(data.target.value);fetch('https://www.cheapshark.com/api/1.0/deals?onSale=1&storeID=1&title='+title).then(function(response){return response.json();}).then(function(gameList){_this.setState({games:gameList},function(){console.log(_this.state.games);});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.addToWishlist=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data,game){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(data);try{axios.post('/user/game/'+data);}catch(error){console.log('Error: '+error);}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this.state={games:null};_this.fetchGame=_this.fetchGame.bind(_assertThisInitialized(_this));_this.addToWishlist=_this.addToWishlist.bind(_assertThisInitialized(_this));return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('https://www.cheapshark.com/api/1.0/deals?storeID=1',options).then(function(response){return response.json();}).then(function(gameList){_this2.setState({games:gameList},function(){console.log(_this2.state.games);});});}},{key:\"render\",value:// async getAllGames() {\n//   try {\n//     const response = await fetch('https://www.cheapshark.com/api/1.0/deals?', options);\n//     const data = await response.json();\n//     console.log(data);\n//     this.setState({ games: data, error: null });\n//     console.log(this.state)\n//   } catch(err) {\n//     this.setState({ games: [], error: 'Error finding discounts: ' + err });\n//   }\n//   // console.log(data);\n// }\nfunction render(){var _this$state$games,_this3=this;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search\",onChange:this.fetchGame})}),/*#__PURE__*/_jsx(\"div\",{class:\"list-wrapper\",children:(_this$state$games=this.state.games)===null||_this$state$games===void 0?void 0:_this$state$games.map(function(game){return/*#__PURE__*/_jsxs(\"div\",{class:\"game-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"game\",class:\"image-style\",src:game.thumb}),/*#__PURE__*/_jsx(\"p\",{children:game.salePrice}),/*#__PURE__*/_jsx(\"p\",{class:\"strike\",children:game.normalPrice}),/*#__PURE__*/_jsx(\"button\",{onClick:_this3.addToWishlist.bind(_this3,game),children:\"Add to Wishlist\"})]});})})]});}}]);return Home;}(Component);export{Home as default};","map":{"version":3,"names":["React","Component","fetch","axios","GameList","options","method","headers","accept","Home","fetchGame","data","title","target","value","console","log","then","response","json","gameList","setState","games","state","addToWishlist","game","post","error","bind","map","thumb","salePrice","normalPrice"],"sources":["/home/ubuntu/environment/public_html/DealTracker/front-end/src/components/home.js"],"sourcesContent":["import React, { Component } from 'react';\nimport fetch from 'node-fetch';\nimport './home.css';\nimport axios from 'axios';\n// components\nimport GameList from './shared/game-list';\n\nconst options = {method: 'GET', headers: {accept: 'application/json'}};\n\nexport default class Home extends Component {\n  \n  constructor() {\n    super();\n    this.state = {\n      games: null\n    };\n    this.fetchGame = this.fetchGame.bind(this);\n    this.addToWishlist = this.addToWishlist.bind(this);\n  }\n  \n  componentDidMount() {\n    fetch('https://www.cheapshark.com/api/1.0/deals?storeID=1', options)\n    .then((response) => response.json())\n    .then(gameList => {\n      this.setState({ games: gameList }, () => { console.log(this.state.games) });\n    });\n  }\n  \n  fetchGame = async(data) => {\n    const title = data.target.value;\n    console.log(data.target.value);\n    fetch('https://www.cheapshark.com/api/1.0/deals?onSale=1&storeID=1&title=' + title)\n    .then((response) => response.json())\n    .then(gameList => {\n      this.setState({ games: gameList }, () => { console.log(this.state.games) });\n    });\n  }\n  \n  addToWishlist = async(data, game) => {\n    console.log(data);\n    try {\n      axios.post('/user/game/' + data);\n    } catch(error) {\n      console.log('Error: ' + error);\n    }\n  }\n  // async getAllGames() {\n  //   try {\n  //     const response = await fetch('https://www.cheapshark.com/api/1.0/deals?', options);\n  //     const data = await response.json();\n  //     console.log(data);\n  //     this.setState({ games: data, error: null });\n  //     console.log(this.state)\n  //   } catch(err) {\n  //     this.setState({ games: [], error: 'Error finding discounts: ' + err });\n  //   }\n  //   // console.log(data);\n  // }\n  \n  render() {\n    \n    return (\n    <div>\n      <form>\n        <input type='text' placeholder='Search' onChange={this.fetchGame}/>\n      </form>\n      <div class='list-wrapper'>\n        {this.state.games?.map(game => (\n          <div class='game-wrapper'>\n            <img alt='game' class='image-style' src={game.thumb}/>\n            <p>{game.salePrice}</p>\n            <p class='strike'>{game.normalPrice}</p>\n            <button onClick={this.addToWishlist.bind(this, game)}>Add to Wishlist</button>\n          </div>\n        ))}\n      </div>\n    </div>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}